<h1>Teams</h1>

<table class='table table-striped'>
  <tr>
    <th>Name</th>
    <th>Description</th>
    <th>Captain</th>
    <th></th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @teams.each do |team| %>
  <tr>
    <td><%= team.name %></td>
    <td><%= team.description %></td>
    <td><%= team.captain.name %></td>
    <td><%= link_to 'Show', team %></td>
    
    <% if can? :join, team %>
      <% if current_user.member? team %>
        <td><%= link_to 'Leave', leave_team_path(team), confirm: 'Are you sure you want to leave this team?'%></td>
      <% else %>
        <td><%= link_to 'Join', join_team_path(team), confirm: 'Are you sure you want to join this team?'%></td>
      <% end %>
    <% end %>
    
    <% if can? :update, team %>
      <td><%= link_to 'Edit', edit_team_path(team) %></td>
    <% end %>
    <% if can? :destroy, team %>
      <td><%= link_to 'Destroy', team, confirm: 'Are you sure?', method: :delete %></td>
    <% end %>
  </tr>
<% end %>
</table>

<br />

<% if can? :create, Team %>
  <%= link_to 'New Team', new_team_path %>
<% end %>
